红黑树： 是一个二叉查找树， 在平衡二叉树的高效查找速率和低速插入删除速率的折中。

特性：  
1、每个节点必须是红色或者黑色  
2、根节点必须是黑色  
3、每个叶子节点(null)是黑色  
4、每个红色节点的子节点必是黑色  
5、从一个节点到该节点的子孙叶子节点的所有路径上包含相同数目的黑色节点
 
参考HashMap 中红黑树的实现

一、左旋和右旋操作：  
左旋和右旋是 不改变二叉查询数的特性的情况下，对二叉树进行调整

| 情况 | 原图 | 旋转图 | 
| :----: | :----: | :----: | 
| 左旋 | ![原图](picture/原图-0.png)  | ![原图左旋](picture/原图左旋-0.png) |
| 右旋 | ![原图](picture/原图-0.png) | ![原图右旋](picture/原图右旋-0.png)|

 
二、添加节点操作：  
1、找到要插入的的节点位置
2、插入一个节点为红色的节点  
上面两步保证了节点的 “特性5”， 但是可能会破坏 “特性2” 或 “特性4”.

情况1： 破坏“特性2”时，直接将 当前节点设置为黑色即可  
情况2： 破坏“特性4”时，即变化节点(C) 与 其父节点(P) 的颜色都是红色，  将情况列表分析   
设定： 父节点的兄弟节点为 PB， 父节点的父节点为 PP, 变化节点的左节点为 CL, 变化节点的右节点为 CR

|   | 情况 | 情况示意图 | 旋转示意图 | 说明 | 
| :----: | :----: | :----: | :----: | :----: | 
| 情况1 | PB为红色 |  ![](picture/insert/双红-PB红-0.png) | ![](picture/insert/双红-PB红(解)-0.png) | 这是比较简单的情况,<br/>只需要将父节点和父节点的兄弟节点的红色往上传递，最后， 以pp为C节点判定 |
| 情况2 | PB为黑色, P为PP的左节点, C为P的左节点 |  ![](picture/insert/双红-PB黑-左左-0.png) | ![](picture/insert/双红-PB黑-左左(解)-0.png) | 这种情况只需要以P为结点右旋， 然后将C节点转变为黑色， 最后以P 为C节点判定 |
| 情况3 | PB为黑色, P为PP的左节点, C为P的右节点 |  ![](picture/insert/双红-PB黑-左右-0.png) | 第一步，以p为节点左旋   ![](picture/insert/双红-PB黑-左右(步骤1)-0.png)  <br /> 第二步，以pp为节点右旋   ![](picture/insert/双红-PB黑-左右(步骤2)-0.png)| 这种情况分两步走,第一步最左旋，第二步右旋，<br/> 第一步其实就是将情况转化为 情况2，第二步就是按照 情况2的步骤 进行解决的<br/>  最后以C节点 再次进行判定 |
| 情况4 | PB为黑色, P为PP的右节点, C为P的左节点 | ![](picture/insert/双红-PB黑-右左-0.png) | 第一步，以p为节点右旋  ![](picture/insert/双红-PB黑-右左(步骤1)-0.png)   <br /> 第二步，以pp为节点左旋  ![](picture/insert/双红-PB黑-右左(步骤2)-0.png)  | 这种情况分两步走,第一步最右旋，第二步左旋，<br/> 第一步其实就是将情况转化为 情况5，第二步就是按照 情况5的步骤 进行解决的<br/>  最后以C节点 再次进行判定 |
| 情况5 | PB为黑色, P为PP的右节点, C为P的右节点 | ![](picture/insert/双红-PB黑-右右-0.png) | ![](picture/insert/双红-PB黑-右右(解)-0.png) | 这种情况只需要以P为结点左旋， 然后将C节点转变为黑色， 最后以P 为C节点判定 |

三、删除节点操作：
1、删除的节点存在仅左节点, 使用左节点代替删除节点  
2、删除的节点存在仅右节点, 使用右节点代替删除节点  
3、删除的节点不存在左右节点, 当前不做任何处理, 以当前的节点进行调整操作, 调整完成之后, 最后再删除 删除节点  
4、删除的节点存在左右节点, 从右节点开始找，找到最接近删除节点的值为替代节点, 将替代节点 与 删除节点 交换位置 (包括父节点和子节点,节点颜色)， 当前情况转化 删除 新位置的删除节点，就转化为情况1、2或者3  

 当节点被删除之后， 当前的树将不是一颗红黑树， 其可能会破坏 特性2、特性4、特性5
 但是重新统计节点长度会很麻烦， 那么我们将 替代节点 让其拥有两种颜色, 那么将特性5的情况不会被破坏, 但是会破坏 特性1.
 
 那么设定 替代节点(T) 拥有两种颜色(替代的颜色和删除节点的颜色)， 替代节点的父节点(P), 替代节点的兄弟节点(B), 替代节点的左节点(TL), 替代节点的右节点(TR), 兄弟节点的左节点(BL), 兄弟节点的右节点(BR)
 
 | 情况 | 替代节点颜色 | 分析 |
 | :----: | :----: | :----: |
 | 情况1 | 红+红 | 将替代节点的颜色修改为红色 |
 | 情况2 | 红+黑 | 将替代节点的颜色修改为黑色 |
 | 情况3 | 黑+黑 | 这种情况T节点这边的黑节点的数目比其位置的 少1, 无法直接解决, 下面进一步分析|
 
 T=黑+黑， 
 
|   | 情况 | 情况示意图 | 旋转示意图 | 说明 | 
| :----: | :----: | :----: | :----: | :----: | 
| 情况1 | B=红 | | | |
| 情况2 | B=黑, BL=红, BR=红 |
| 情况3 | B=黑, BL=红, BR=黑 |
| 情况3 | B=黑, BL=黑, BR=红 |
| 情况4 | B=黑, BL=黑, BR=黑 |